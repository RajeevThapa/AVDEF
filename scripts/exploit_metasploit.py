import os

def run_metasploit():
    # Set workspace directory and .rc file path
    workspace_dir = os.getenv('WORKSPACE', '.')
    metasploit_rc_path = os.path.join(workspace_dir, "configs", "metasploit.rc")

    # Check if the .rc file exists
    if not os.path.exists(metasploit_rc_path):
        print(f"Error: Metasploit configuration file '{metasploit_rc_path}' not found.")
        return

    # Execute msfconsole with the specified rc file
    os.system(f"msfconsole -r {metasploit_rc_path}")
    print("Metasploit exploitation completed.")

if __name__ == "__main__":
    run_metasploit()
